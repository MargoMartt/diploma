<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>БЗПИ - Онлайн-магазин</title>
    <meta name="robots" content="noindex, follow"/>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.png">

    <!-- All CSS is here
	============================================ -->

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/styles/vendor/bootstrap.min.css">
    <!-- Icon Font CSS -->
    <link rel="stylesheet" href="/styles/vendor/font-awesome.css">
    <link rel="stylesheet" href="/styles/vendor/dlicon.css">
    <!-- Others CSS -->
    <link rel="stylesheet" href="/styles/plugins/owl-carousel.css">
    <link rel="stylesheet" href="/styles/plugins/slick.css">
    <link rel="stylesheet" href="/styles/plugins/magnific-popup.css">
    <link rel="stylesheet" href="/styles/plugins/jarallax.css">
    <link rel="stylesheet" href="/styles/plugins/easyzoom.css">
    <link rel="stylesheet" href="/styles/plugins/animate.css">
    <link rel="stylesheet" href="/styles/plugins/fullpage.css">
    <link rel="stylesheet" href="/styles/plugins/jquery-ui.css">
    <link rel="stylesheet" href="/styles/plugins/select2.min.css">
    <link rel="stylesheet" href="/styles/style.css">

</head>

<body>

<div class="main-wrapper">
    <header class="header-area section-padding-1">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-xl-2 col-lg-2">
                    <div class="logo logo-width">
                        <a href="/">
                            <img src="/images/logo/logo.png" alt="logo">
                        </a>
                    </div>
                </div>
                <div class="col-xl-8 col-lg-8 d-flex justify-content-center position-static">
                    <div class="main-menu menu-lh-1 main-menu-padding-1">
                        <nav>
                            <ul>
                                <li class="position-static"><a class="active" href="/">Главная</a>
                                </li>
                                <li><a href="/">Страницы <i class="fa fa-angle-down"></i></a>
                                    <ul class="sub-menu-width">
                                        <li><a href="/about-us">О нас</a></li>
                                        <li><a href="/contact">Контакты</a></li>
                                        <li><a href="/faq">FAQ</a></li>
                                    </ul>
                                </li>
                                <li><a href="/product/all">Магазин </a>
                                </li>
                                <li><a href="/blog">Блог </a>
                                </li>
                                <li><a href="/account">Мой аккаунт <i class="fa fa-angle-down"></i> </a>
                                    <ul class="sub-menu-width">
                                        <li><a href="/account">Аккаунт</a></li>
                                        <li><a href="/cart">Корзина</a></li>
                                        <li><a href="/login">Вход / Регистрация</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
                <div class="col-xl-2 col-lg-2">
                    <div class="header-right-wrap header-right-flex">
                        <div class="same-style cart-wrap">
                            <a href="#" class="cart-active">
                                <i class="dlicon shopping_bag-20"></i>
                                <span class="count-style">02</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <div class="header-small-mobile section-padding-1">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-6">
                    <div class="mobile-logo logo-width">
                        <a href="index.html">
                            <img alt="" src="/images/logo/logo.png">
                        </a>
                    </div>
                </div>
                <div class="col-6">
                    <div class="mobile-header-right-wrap">
                        <div class="header-right-wrap header-right-flex">
                            <div class="same-style cart-wrap">
                                <a href="#" class="cart-active">
                                    <i class="dlicon shopping_bag-20"></i>
                                    <span class="count-style">02</span>
                                </a>
                            </div>
                            <div class="same-style header-off-canvas">
                                <a class="header-aside-button" href="#">
                                    <i class="dlicon ui-3_menu-left"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- mini cart start -->
    <div class="sidebar-cart-active">
        <div class="sidebar-cart-all">
            <a class="cart-close" href="#"><i class="dlicon ui-1_simple-remove"></i></a>
            <div class="cart-content">
                <h3>Shopping Cart</h3>
                <ul>
                    <li class="single-product-cart">
                        <div class="cart-img">
                            <a href="#"><img src="/images/cart/cart-1.jpg" alt=""></a>
                        </div>
                        <div class="cart-title">
                            <h4><a href="#">Bejewelled velvet sandals</a></h4>
                            <span> 1 × $49.00	</span>
                        </div>
                        <div class="cart-delete">
                            <a href="#">×</a>
                        </div>
                    </li>
                    <li class="single-product-cart">
                        <div class="cart-img">
                            <a href="#"><img src="/images/cart/cart-2.jpg" alt=""></a>
                        </div>
                        <div class="cart-title">
                            <h4><a href="#">Contrast faux fur jacket</a></h4>
                            <span> 1 × $49.00	</span>
                        </div>
                        <div class="cart-delete">
                            <a href="#">×</a>
                        </div>
                    </li>
                </ul>
                <div class="cart-total">
                    <h4>Subtotal: <span>$170.00</span></h4>
                </div>
                <div class="cart-checkout-btn">
                    <a class="btn-hover cart-btn-style" href="cart.html">view cart</a>
                    <a class="no-mrg btn-hover cart-btn-style" href="checkout.html">checkout</a>
                </div>
            </div>
        </div>
    </div>
    <!-- aside start -->

    <div class="breadcrumb-area section-padding-1 bg-gray breadcrumb-ptb-1">
        <div class="container-fluid">
            <div class="breadcrumb-content text-center">
                <div class="breadcrumb-title">
                    <h2>Мой аккаунт</h2>
                </div>
                <ul>
                    <li>
                        <a href="/">Главная </a>
                    </li>
                    <li><span> &gt; </span></li>
                    <li class="active"> Мой аккаунт</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="my-account-area pt-100 pb-95">
        <div class="container">
            <div class="row flex-row-reverse">
                <div class="col-lg-12">
                    <div class="myaccount-tab-menu nav" role="tablist">
                        <a href="#dashboad" class="active" data-bs-toggle="tab">
                            Общая информация</a>
                        <a href="#orders" data-bs-toggle="tab"> Заказы</a>
                        <a href="#account-info" data-bs-toggle="tab"> Детали аккаунта</a>
                        <a href="#organization" data-bs-toggle="tab"> Детали организации</a>
                        <a href="/logout"> Выход</a>
                    </div>
                    <!-- My Account Tab Menu End -->
                    <!-- My Account Tab Content Start -->
                    <div class="tab-content" id="myaccountContent">

                        <!-- Single Tab Content Start -->
                        <div class="tab-pane fade show active" id="dashboad" role="tabpanel">
                            <div class="myaccount-content">
                                <div class="welcome">
                                    <p th:if="${user.getUserName()} != null and ${user.getUserSurname()} != null">
                                        Здравствуйте, <strong th:text="${user.getUserName()} + ' ' + ${user.getUserSurname()}"></strong>
                                    </p>
                                    <p th:if="${user.getUserName()} == null or ${user.getUserSurname()} == null">
                                        Здравствуйте!
                                    </p>
                                </div>
                                <p class="mb-0">
                                    На панеле управления аккаунтом вы можете просмотреть свои заказы, управлять своими покупками и изменить детали аккаунта.
                                </p>
                            </div>
                        </div>
                        <!-- Single Tab Content End -->
                        <!-- Single Tab Content Start -->
                        <div class="tab-pane fade" id="orders" role="tabpanel">
                            <div class="myaccount-content">
                                <div class="myaccount-table table-responsive text-center">
                                    <table class="table table-bordered">
                                        <thead class="thead-light">
                                        <tr>
                                            <th>Заказ</th>
                                            <th>Товар</th>
                                            <th>Дата</th>
                                            <th>Статус</th>
                                            <th>Сумма</th>
                                            <th>Тип доставки</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="order,iter: ${orders}">
                                            <td th:text="${iter.index+1}"></td>
                                            <td><a th:href="@{/product/info/{id}(id=${order.getProductId()})}"
                                                   th:text="${order.getProductByProductId().getProductName()}"></a></td>
                                            <td><span th:text="${order.getDate()} + ' ' + ${order.getTime()}"></span>
                                            </td>
                                            <td><span th:text="${order.getOrderStatus()}"></span></td>
                                            <td><span th:text="${order.getOrderCost()} + ' BYN'"></span></td>
                                            <td><span th:text="${order.getOrderType()}"></span></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <!-- Single Tab Content End -->
                        <!-- Single Tab Content Start -->
                        <div class="tab-pane fade" id="account-info" role="tabpanel">
                            <div id="account-info-message" class="alert" style="display: none;"></div>
                            <div th:if="${message}" class="alert" th:classappend="${messageType == 'success'} ? 'alert-success' : 'alert-danger'">
                                <span th:text="${message}"></span>
                            </div>
                            <form method="post" th:action="@{/account/editUser}">
                                <div class="myaccount-content">
                                    <div class="account-details-form">
                                        <form action="#">
                                            <input type="hidden" name="tab" value="account-info">
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="single-input-item">
                                                        <label for="first-name" class="required">Имя
                                                            <span>*</span></label>
                                                        <input type="text" name="name" th:value="${user.getUserName()}"
                                                               id="first-name"/>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="single-input-item">
                                                        <label for="last-name" class="required">Фамилия <span>*</span></label>
                                                        <input type="text" name="surname"
                                                               th:value="${user.getUserSurname()}" id="last-name"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="single-input-item">
                                                <label for="display-name" class="required">Логин
                                                    <span>*</span>
                                                </label>
                                                <input type="text" name="login" th:value="${user.getLogin()}" id="display-name" readonly/>
                                            </div>
                                            <div class="single-input-item">
                                                <label for="email" class="required">Номер телефона <span>*</span></label>
                                                <input type="text" name="phone" th:value="${user.getUserPhone()}"
                                                       id="email"/>
                                            </div>
                                            <fieldset>
                                                <legend>Изменить пароль</legend>
                                                <div class="single-input-item">
                                                    <label for="current-pwd" class="required">Текущий пароль </label>
                                                    <input type="password" id="current-pwd" name="oldPassword"/>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="single-input-item">
                                                            <label for="new-pwd" class="required">Новый пароль (пропустите поле,
                                                                если не хотите вность изменения)</label>
                                                            <input type="password" id="new-pwd" name="newPassword"/>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="single-input-item">
                                                            <label for="confirm-pwd" class="required">Подтвердить новый пароль</label>
                                                            <input type="password" id="confirm-pwd"
                                                                   name="newPassword2"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </fieldset>
                                            <div class="single-input-item">
                                                <button type="submit" class="check-btn sqr-btn ">Сохранить изменения</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </form>
                        </div> <!-- Single Tab Content End -->
                        <div class="tab-pane fade" id="organization" role="tabpanel">
                            <div class="myaccount-content">
                                <div class="account-details-form">
                                    <form method="post" th:action="@{/account/organization}">
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="single-input-item">
                                                    <label for="first-name" class="required">Название организации
                                                        <span>*</span></label>
                                                    <input type="text" name="name"
                                                           th:value="${organization.getOrganizationName()}"/>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="single-input-item">
                                                    <label for="last-name" class="required">Тип организации
                                                        <span>*</span></label>
                                                    <!--                                                        <input type="text" name="type" th:value="${organization.getOrganizationType()}"/>-->
                                                    <select class="select-active" name="type"
                                                            onchange="handleSelectChange(this)">
                                                        <option th:each="type : ${types}" th:value="${type}"
                                                                th:text="${type}"
                                                                th:selected="${type == organization.organizationType}"></option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="single-input-item">
                                            <label for="display-name" class="required">Ответственное лицо
                                                <span>*</span></label>
                                            <input type="text" name="responsible"
                                                   th:value="${organization.getOrganizationResponsible()}"/>
                                        </div>
                                        <div class="single-input-item">
                                            <label for="email" class="required">Директор <span>*</span></label>
                                            <input type="text" name="director"
                                                   th:value="${organization.getOrganizationDirector()}"/>
                                        </div>
                                        <div class="single-input-item">
                                            <button type="submit" class="check-btn sqr-btn ">Сохранить изменения</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            </form>
                        </div> <!-- Single Tab Content End -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer-area section-padding-1 border-top-3">
        <div class="container-fluid">
            <div class="footer-top pt-100 pb-60">
                <div class="row">
                    <div class="footer-column footer-width-24">
                        <div class="footer-widget footer-about mb-30">
                            <a href="/">
                                <img src="/images/logo/logo.png" alt="logo">
                            </a>
                            <p>Мы объединяем все известные на сегодняшний день технологии переработки пластмасс: литье под давлением,
                                экструзия, выдув, ротационное формование, прессование.</p>
                            <div class="social-icon-style-2 social-icon-hm4">
                                <a class="facebook" href="#"><i class="fa fa-facebook"></i></a>
                                <a class="twitter" href="#"><i class="fa fa-twitter"></i></a>
                                <a class="youtube" href="#"><i class="fa fa-youtube"></i></a>
                                <a class="dribbble" href="#"><i class="fa fa-dribbble"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="footer-column footer-width-12">
                        <div class="footer-widget footer-info-list-2 mb-30">
                            <h3 class="footer-title">Полезные ссылки</h3>
                            <ul>
                                <li><a href="/about-us">О нас</a></li>
                                <li><a href="/about-us">Помошь</a></li>
                                <li><a href="/about-us">Наша команда</a></li>
                                <li><a href="/about-us">Политика организации</a></li>
                                <li><a href="#">Блог</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="footer-column footer-width-19">
                        <div class="footer-widget footer-info-list-2 footer-contect mb-30">
                            <h3 class="footer-title">Контактная информация</h3>
                            <ul>
                                <li><i class="dlicon ui-2_time-clock"></i> Понедельник - Пятница: 9:00 - 17:00</li>
                                <li><i class="dlicon ui-1_email-83"></i> bzpi@bzpi.by</li>
                                <li><i class="dlicon tech-2_rotate"></i> +375 (177) 79-08-21</li>
                                <li><i class="dlicon ui-1_home-simple"></i> 222511, Республика Беларусь,
                                    Минская область, Борисова,
                                    ул. Даумана, 97
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="footer-column footer-width-29 mb-30">
                        <div class="contact-page-map">
                            <div id="contact-map"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-botoom">
                <div class="row">
                    <div class="col-12">
                        <div class="copyright-2 text-center">
                            <p>© 2024 <a href="https://www.bzpi.by/">БЗПИ.</a> Все права защищены.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <div class="support-lists">
        <ul>
            <li><a href="#"><i class="dlicon ui-3_chat-46"></i></a></li>
            <li><a href="#"><i class=" dlicon ui-3_phone"></i></a></li>
            <li><a href="#"><i class="dlicon ui-1_email-85"></i></a></li>
        </ul>
    </div>
</div>

<!-- All JS is here
============================================ -->
<script src="/scripts/vendor/modernizr-3.11.7.min.js"></script>
<!-- jquery -->
<script src="/scripts/vendor/jquery-v3.6.0.min.js"></script>
<!-- Popper scripts -->
<script src="/scripts/vendor/popper.js"></script>
<!-- Bootstrap scripts -->
<script src="/scripts/vendor/bootstrap.min.js"></script>
<script src="/scripts/plugins/owl-carousel.js"></script>
<script src="/scripts/plugins/slick.js"></script>
<script src="/scripts/plugins/jarallax.min.js"></script>
<script src="/scripts/plugins/countdown.js"></script>
<script src="/scripts/plugins/magnific-popup.js"></script>
<script src="/scripts/plugins/instafeed.js"></script>
<script src="/scripts/plugins/tilt.js"></script>
<script src="/scripts/plugins/images-loaded.js"></script>
<script src="/scripts/plugins/isotope.js"></script>
<script src="/scripts/plugins/scrolloverflow-fullpage.js"></script>
<script src="/scripts/plugins/fullpage.js"></script>
<script src="/scripts/plugins/jquery-ui.js"></script>
<script src="/scripts/plugins/jquery-ui-touch-punch.js"></script>
<script src="/scripts/plugins/easyzoom.js"></script>
<script src="/scripts/plugins/resizesensor.js"></script>
<script src="/scripts/plugins/sticky-sidebar.js"></script>
<script src="/scripts/plugins/scrollup.js"></script>
<script src="/scripts/plugins/select2.min.js"></script>
<script src="/scripts/plugins/cookie.js"></script>
<script src="/scripts/plugins/bpopup.js"></script>
<script src="/scripts/plugins/wow.js"></script>
<script src="/scripts/plugins/ajax-mail.js"></script>
<!-- Main scripts -->
<script src="/scripts/main.js"></script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBMlLa3XrAmtemtf97Z2YpXwPLlimRK7Pk"></script>

<script th:inline="javascript">
    document.addEventListener("DOMContentLoaded", function() {
        // Получаем параметры из URL (если они есть)
        var urlParams = new URLSearchParams(window.location.search);
        var activeTab = urlParams.get('tab');

        // Если параметр не установлен, устанавливаем активную вкладку по умолчанию
        if (!activeTab) {
            activeTab = 'dashboad';
        }

        // Если вкладка была успешно изменена и это не "Детали аккаунта", переключаемся на вкладку "Детали аккаунта"
        var message = urlParams.get('message');
        if (message && activeTab !== 'account-info') {
            activeTab = 'account-info';
        }

        // Активируем нужную вкладку
        var tabLink = document.querySelector('.myaccount-tab-menu a[href="#' + activeTab + '"]');
        if (tabLink) {
            tabLink.classList.add('active');
        }

        // Скрываем содержимое всех вкладок, кроме активной
        var allTabContents = document.querySelectorAll('.tab-pane');
        allTabContents.forEach(function(tabContent) {
            if (tabContent.id !== activeTab) {
                tabContent.classList.remove('show', 'active');
            } else {
                tabContent.classList.add('show', 'active');
            }
        });

        // Если вкладка "Детали аккаунта" активна и есть сообщение, отображаем его
        if (activeTab === 'account-info' && message) {
            var messageDiv = document.getElementById('account-info-message');
            messageDiv.classList.add('alert-' + messageType);
            messageDiv.textContent = message;
            messageDiv.style.display = 'block';
        }
    });
</script>



<script>
    function init() {
        var mapOptions = {
            zoom: 11,
            scrollwheel: false,
            center: new google.maps.LatLng(54.2071, 28.5067), // Координаты для г. Борисов, Беларусь
            styles: [
                // Стили карты
            ]
        };
        var mapElement = document.getElementById('contact-map');
        var map = new google.maps.Map(mapElement, mapOptions);
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(54.2071, 28.5067), // Координаты для г. Борисов, Беларусь
            map: map,
            icon: '/images/icon-img/2.png',
            animation: google.maps.Animation.BOUNCE,
            title: 'Местоположение: г. Борисов, ул. Даумана, 97'
        });
    }

    google.maps.event.addDomListener(window, 'load', init);
</script>
</body>

</html>